---
sidebar_position: 1
title: 仓库
---

**LLMOS** 平台支持用于存储模型和数据集的私有仓库。仓库提供了一种安全且集中的方式来管理您的机器学习资产，使它们在您的 LLMOS 集群中的模型服务和其他应用程序中易于访问。


## 概述

仓库是用于存储模型或数据集的私有存储库。当前的后端存储仅支持对象存储解决方案，为您的机器学习资产提供可扩展且可靠的存储。

:::note
**重要要求：**
- 对象存储必须配置 CORS（跨源资源共享）
- 出于安全原因，仅支持 HTTPS 端点
:::

## 创建仓库

您可以从 **AI 基础设施管理 > 模型管理 > 模型仓库** 页面创建一个或多个仓库。

### 通用配置

1. **名称**：为您的仓库输入唯一名称。
2. **描述**：提供更好地描述此资源的描述。
3. **后端类型**：选择 **S3** 作为存储后端（目前唯一支持的选项）。

![registry-create](/img/docs/registry-create.png)

### 配置 S3 后端

配置 S3 后端时，您需要提供以下信息：

1. **端点**：S3 兼容的端点 URL（例如，`s3.registry.com:5000`）
   - 必须使用 HTTPS 协议以确保安全
   - 确保端点可从您的 LLMOS 集群访问

2. **存储桶**：将存储您的模型和数据集的 S3 存储桶名称（例如，`bucket`）

3. **使用 Https**：此复选框默认启用且无法禁用，因为仅支持 HTTPS 连接。

4. **密钥名称**：选择包含您的 S3 凭据的现有密钥，或创建新密钥。
   - 密钥应包含您的 S3 访问密钥和秘密密钥
   - 有关详细说明，请参阅[添加 S3 凭据](#adding-s3-credentials)

## 管理仓库

创建后，仓库会显示在仓库列表中，包含以下信息：

- **状态**：显示仓库是否处于活动状态且可访问
- **名称**：您指定的仓库名称
- **端点**：配置的 S3 端点
- **存储桶**：关联的 S3 存储桶
- **默认**：指示这是否为命名空间的默认仓库

![registries-list](/img/docs/registry-list.png)

### 仓库操作

对于每个仓库，您可以：

- **编辑**：修改仓库配置
- **删除**：删除仓库（确保没有模型或数据集依赖于它）
- **设为默认**：将此仓库设为新模型和数据集操作的默认仓库

## 使用仓库

配置完成后，仓库可用于：

1. **存储模型**：上传和管理机器学习模型
2. **存储数据集**：组织和版本化您的训练和验证数据集

## CORS 配置

:::warning
**需要 CORS 设置**

您的 S3 兼容对象存储必须配置适当的 CORS 设置，以允许 LLMOS 访问仓库。如果没有正确的 CORS 配置，仓库操作可能会失败。
:::

您的 S3 存储桶的 CORS 配置示例：

```json
[
  {
    "AllowedHeaders": ["*"],
    "AllowedMethods": ["GET", "PUT", "POST", "DELETE", "HEAD"],
    "AllowedOrigins": ["*"],
    "ExposeHeaders": ["ETag"]
  }
]
```
